## 例题：北京地铁

### 题目

```c++
题目 - 北京地铁	
描述
北京地铁涨价了，现在的地铁票价计算方法如下：
6公里内 3元 （包括6公里）
6-12 公里 4元 （不包括6公里，包括12公里）
12-32 公里 每10公里加1元（不包括12公里，包括32公里，不满10公里按10公里算）
32公里以上 每20公里加1元（不包括32公里，不满20公里按20公里算）
比如，50公里时，需要 4+2+1=7元
 
同时，北京地铁也给出了优惠方案：
每个自然月内，使用交通卡满100元，则票价可打8折；满150元，则票价可打5折；满400元，则票价不打折。
 
现在，小明有一张公交卡，小明想知道自己现在坐地铁的票价是多少？请你写程序完成这个功能。
关于输入
输入有两个整数，一个是小明现在这个月的累计消费，一个是小明本次乘坐的里程数
关于输出
输出为本次乘坐的票价，保留两位小数
例子输入
120 20
例子输出
4.00
```

这是一道俺无从下手的题目，先来学习一下。

我的问题：

1.区间多，无从下手；

2.关于“优惠卡”这个条件不知道怎么用，何时用

3.通过消费和里程数倒推票价

但是消费是这个月的累计消费

里程数只是本次乘坐的里程数

我已经知道本次乘坐里程数了，就知道里程数在哪个区间了

然后去看票价，是本次的票价

那和累计消费关系是什么呢。。。。

不会了。。。。

### 答案代码

```c++
#include<iostream>
#include<iomanip>
#include<cmath>
using namespace std;
int main() {
	int pil=0,lcs=0;
	double sum = 0;
	cin >> pil>>lcs;
		//6公里内 3元 （包括6公里）
	if (lcs <= 6)
			sum = 3;
 
	else if ((lcs > 6) && (lcs <= 12))
			sum = 4;
	else if ((lcs > 12) && (lcs <= 32)) {
			sum = 4;
			sum += ceil((lcs - 12) / (double)10);
			
		}
	else {
			sum = 6;
			sum += ceil((lcs - 32) / (double)20);
			
		}
	if ((pil >= 100) && (pil < 150))
			sum *= 0.8;
	else if ((pil >= 150) && (pil < 400))
			sum *= 0.5;
	
	cout << fixed << setprecision(2) << sum;
	return 0;
}
```

以上没有注释，我来个注释理解一下。。。

### 代码-注释版

```c++
#include<iostream>
#include<iomanip>
#include<cmath>
using namespace std;
int main()
 {
	
    int pil=0,lcs=0;
	double sum = 0;//sum是到这一步累计消费多少,本该给的价钱
 
	cin >> pil>>lcs;
 
//下面对里程数分区间		
//6公里内 3元 （包括6公里）
	if (lcs <= 6)
			sum = 3;
//4元的
	else if ((lcs > 6) && (lcs <= 12))
			sum = 4;
//小于32大于12的，每10公里1元，不足的取整
	else if ((lcs > 12) && (lcs <= 32)) {
			sum = 4;
			sum += ceil((lcs - 12) / (double)10);
 
//查了一下，ceil是往无穷大方向取整，不小于它的最小整数，只要有小数部分就进一位
//sum += ceil((lcs - 12) / (double)10);这个除完之后是小数可以替换，不然有没有小数（能不能整除）还要分一下
//如果是10/10,整除
//4%10=4
 
//if((lcs - 12)%10==0)
//sum+=(lcs - 12)%10;
//if((lcs - 12)%10!=0)
//sum+=（(lcs - 12)%10）+1；
}
	
else {
			sum = 6;
			sum += ceil((lcs - 32) / (double)20);
			
		}
 
如果消费在这个区间，就优惠	
if ((pil >= 100) && (pil < 150))
			sum *= 0.8;
	else if ((pil >= 150) && (pil < 400))
			sum *= 0.5;
	
	cout << fixed << setprecision(2) << sum;//两位小数
	return 0;
}
```

 哦哦我懂了就是，给的累计消费数是坐了这次之前的，如果之前满了，这一次才会有优惠

然后，把这一次的钱优惠掉，结果就是这一次的票价了。。。

我懂了！

这玩意要累计！

还有个细节就是。。。

==小数输出==。

### 小数输出问题

==需要用到#include<iomanp>头文件==

```c
(1) 强制以小数的方式显示；
cout<<fixed;
(2)控制显示精度；
cout<<setprecision(2);
保留两位小数，写n代表保留n位小数。
注意：上述两个控制语句能控制该语句下面的所有输出语句的格式，如若改变格式，再写一个其他格式的语句。
```

但是老师好像没讲fix要写，而且sum本来就定义double，我感觉不用。。。